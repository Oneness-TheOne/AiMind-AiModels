같다. 진행하였다. YOLO의 빠른 학습을 위해서 GPU
위의 이미지로 학습된 모델이 Test 데이터에 연산을 지원하는 Darknet Framework를 사용하
서 객체의 크기와 위치의 변화에 민감하지 못한 였는데 Darknet은 Linux 환경에서만 빌드 가능
결과를 보여주었는데, 수집된 그림 데이터에서 하기 때문에 Ubuntu 가상환경을 생성하여 진행
대부분의 나무 그림이 화지를 가득 채우는 경 하였다. 전체 개발환경은 표 3과 YOLO 학습환
향을 보였기 때문에 학습데이터의 다양성이 부 경은 표 4와 같다.
족하다고 판단하여 객체의 Scale을 조정한 뒤 HTP 객체검출모델의 시스템 구성은 다음
학습데이터에 추가하였다. 기존 ‘labelimg’ Tool 그림 2와 같다. 집, 나무, 사람 각 1장씩 총 3
을 통해 그려진 객체의 정답 Box를 따로 뽑아 장의 이미지를 하나의 세트로 입력받는다. 이
내어 30%에서 90%까지 Scale을 줄이고 빈 화지 중 한 장이라도 예측 확률이 사용자가 설정한
를 생성한 뒤 Scale를 줄인 객체를 랜덤한 위치 Confidence Threshold을 넘지 못하거나, 나무
에 붙인 뒤 저장하였다. 예시 이미지는 표 2와 이미지를 사람이라고 예측하는 등, 다른 객체라
표 3. 개발환경
장비 모델
Processor Intel(R) Xeon(R) Silver 4215R CPU @ 3.20GHz, 3.19 GHz
RAM 64.0GB
Graphic Card NVIDIA Corporation TU104GL Quadro RTX 5000
OS Windows 10 Pro for Workstations
표 4. HTP 객체검출모델 학습환경
장비 모델
Processor Intel(R) Xeon(R) Silver 4215R CPU @ 3.20GHz, 3.19 GHz
RAM 64.0GB
Graphic Card NVIDIA Corporation TU104GL Quadro RTX 5000
OS Ubuntu 20.04.5 LTS
- 1247 -
--- Page 8 ---
미술치료연구
크기가 작은 객체들에 대한 인식률이 낮게 나
타난 것으로 판단하였다. 두 번째 모델은 이러
한 문제점을 해결하기 위해 객체들을 뽑아내어
크기를 조정한 뒤 위치를 랜덤으로 조정한 데
이터를 생성하고 기존 데이터에 추가해 학습하
였다.
HTP 객체검출모델 ver3
세 번째 모델은 학습데이터의 다양성을 추가
하기 위해 기존 데이터에 동적 집-나무-사람 그
림검사의 데이터(Burns, 1998)를 추가하여 학습
하였다.
그림 2. HTP 객체검출모델의 시스템 모델 정확도 평가 및 성능 향상
고 판단했다면 HTP 객체검출에 실패한 것으로 본 연구는 학습된 HTP 객체검출모델의 성능
간주하고 프로그램을 종료한다. 세 장 모두 옳 을 확인하기 위해 선행논문에서 HTP 그림 자료
게 객체를 찾아냈다면 이 정답 Box 값을 이용해 집 102장, 나무 100장, 사랑 102장을 수집하였으
객체의 위치와 크기를 계산한다. 객체의 위치와 며, 초등학생부터 노년층에 이르기까지 폭넓은
크기가 특정되면 각 위치와 크기에 맞는 HTP 나이와 지적장애, 청각장애인, 저소득층 아동,
검사의 형식적 해석을 최종 결과로 출력한다. 시설보호 아동 등 다양한 특성의 가진 내담자가
연구자는 아래와 같이 세 가지 모델을 개발 그린 데이터를 수집하였다(고예진, 2009; 김은경,
하여 정확도를 비교해 보았다. 2010; 백원대, 2019; 성묘진, 2010; 성용우, 2013;
손성화, 2006; 이경아, 2010; 이준영, 2012; 이충
HTP 객체검출모델 ver1 헌, 2014; 조윤경, 2011).
모델의 성능 평가는 YOLOv4를 이용해 학습
첫 번째 모델은 수집한 데이터에 축소 및 기 하여 생성된 결과 파일 중 평가 지표상 결과가
울기, x축, y축 변화를 통해 이미지 증식한 데이 가장 좋은 best 결과 파일을 이용하였다. 모델에
터를 추가하여 학습하였다. Test 데이터를 입력하여 받은 예측 결과값을 미
리 연구자가 Test 데이터마다 각각 만들어두었
HTP 객체검출모델 ver2 던 정답 Box와 비교하여 IOU(Intersecion Over
Union) 지표에 따라 평가하였다. IOU 지표는
HTP 검사에서 나무 그림은 크게 그려지는 객체검출의 정확도를 평가하는 대표적인 지표로
경향이 있는데, 초반 학습데이터도 대부분의 나 실제 객체 위치의 정답 Box와 예측한 객체 Box,
무들이 화지를 꽉 채우는 결과를 보였다. 그 때 두 Box가 중복되는 영역의 크기를 통해 평가하
문에 ver1 모델을 Test 데이터에 사용하였을 때 는 방식이다. IOU 지표의 계산 수식은 실제와
- 1248 -
--- Page 9 ---
이은정․황세진 / 인공지능 객체검출모델 기반 집-나무-사람(HTP) 그림검사의 형식적 해석 연구
그림 3 객체검출 모델의 예측 결과와 정답 간의 관계도
예측 영역의 중복된 영역, 즉 교집합의 넓이를 표 5. HTP 객체검출모델 ver1의 정확도와 F1-Score
실제와 예측 영역의 합집합 넓이로 나눈 값이
HTP 객체검출모델 ver1
다. 이 IOU 지표값이 0.5 이상일 때 HTP 객체
평균 정확도 : 0.68
검출모델이 객체를 바르게 찾아낸 것으로 분류
하였다. 이렇게 IOU 지표값을 활용하여 예측 결
과와 실제 정답 간의 관계도 TP(True Positive,
실제 양성 예측 양성), FP(False Positive, 실제
음성 예측 양성), FN(False Negative, 실제 양성
예측 음성), TN(True Negative, 실제 음성 예측
음성)값을 구하였다. 그림 3에서 관계도를 볼 수
있다. 이후 정밀도(Precision)와 재현율(Recall),
정확도(Accuracy)를 계산하여 모델들의 성능을
비교하였다. 정확도는 전체 예측에서 옳게 예측
한 것의 비율로 일반적으로 모델의 성능을 평가
하는 데 유용하지만 데이터가 불균형할 때는 그
렇지 않다. 이 경우 Recall과 Precision의 조화
평균을 구해 하나의 값으로 모델 성능을 표현하
평균 F1-score : 0.77
는 F1-Score를 사용할 수 있다.
표 5, 6, 7은 Confidence의 변화에 따른 모델
들의 정확도와 F1-Score를 보여준다. Confidence
Score는 모델이 객체를 찾았을 때 그 객체가 해
당 Class에 속하는 것이 얼마나 믿을만한지 알
려주는 값으로, YOLOv4로 학습된 모델은 객체
를 찾았을 때 해당 Class Name과 Confidence
Score, 예측 Box의 시작 좌표와 넓이, 높이 값을
알려준다. 본 연구는 Confidence Threshold 값
을 조절하여 Threshold가 넘지 않는 예측은 객
체검출에 실패한 것으로 구분하였다. 따라서
Confidence Threshold가 높아질수록 객체검출
에 성공한 것으로 구분하는데 신중하다. 즉 정
밀도는 상승하나 재현율은 낮아진다. Test 결
- 1249 -
--- Page 10 ---
미술치료연구
표 6. HTP 객체검출모델 ver2의 정확도와 F1-Score 표 7. HTP 객체검출모델 ver3의 정확도와
F1-Score
HTP 객체검출모델 ver2
평균 정확도 : 0.87 HTP 객체검출모델 ver3
평균 정확도 : 0.53
평균 F1-score : 0.93
평균 F1-score : 0.68
과 ver2 모델이 평균 정확도 87%, F1-Score
93%, 가장 높은 정확도 90%, F1-Score 95%로 내고 있으므로 추후 Test 이미지를 넣어 후
정확도와 F1-Score 모두 전체적으로 높은 성능 처리를 진행할땐 HTP 객체검출모델 ver2의
을 보여주고 있다. 또한 Confidence Threshold Confidence Threshold를 0.4로 설정하여 사용
가 0.1에서 0.4일 때 가장 좋은 결과를 나타 하였다.
- 1250 -
--- Page 11 ---
이은정․황세진 / 인공지능 객체검출모델 기반 집-나무-사람(HTP) 그림검사의 형식적 해석 연구
Ⅲ. 연구 결과 HTP 평가기준을 개발한 박희진(2011)은 집과
사람 그림에서 종이면적의 1/2~2/3 정도면 가
HTP 객체검출모델의 결과값 계산 장 높은 4점을 종의면적의 1/4이하이거나 거의
다 차지했으면 가장 낮은 1점을 주었다. 이를
앞선 Test 결과가 가장 좋았던 HTP 객체검출 참고하여 화지를 가득 채우는 가장 큰 Box 비율
모델 ver2의 Confidence Threshold 값을 0.4로 을 100%로 설정하고 Box의 비율이 33% 이하면
설정한 뒤 크기와 위치 후처리 연구를 진행하 작다고, 68% 이상이면 크다고 해석한다. 나무
였다. 이미지를 불러와 먼저 계산의 편의성을 그림은 HTP 검사에서 다른 무엇보다 크게 그려
위해 이미지의 크기를 동일하게 변경시킨다. 크 지는 경향이 있고(김동연, 2002), 백원대(2019)가
기는 가용할 수 있는 자원의 학습 속도와 정확 정리한 나무 검사 해석 비교에서 화지를 꽉 채
도를 고려하여 72DPI 해상도 842𐍇595로 설정 우거나 밖으로 벗어날 정도의 큰 나무 표현을
하였다. 모델에 Test 이미지(집, 나무, 사람 각 유의미하게 보고 해석한 선행연구가 많았다. 때
1장씩)를 집어넣고 결과에서 각 그림당 하나씩 문에 연구자도 Box의 크기가 90% 이상일 때 크
올바른 객체가 검출되었는지 확인한다. 이때 다고 해석하였다.
객체가 옳게 검출되었더라도, 검출된 객체의
Confidence 값이 처음 설정해놓은 0.4를 넘지 형식적 해석 적용
못하면 객체검출에 실패한 것으로 간주한다.
정리하면, 객체를 아무것도 찾지 못하거나, 다 예측한 객체의 크기와 위치를 알게 된다면
른 Class의 객체를 검출하거나, 검출된 객체의 최종적으로 크기와 위치에 맞는 해석을 내보낸
Confidence 값이 Threshold를 넘지 못하였을 때 다. 해석은 교재와 선행연구를 참고하여 추가하
는 객체검출에 실패한 것으로 판단하고 프로그 였다(강봉규, 2000; 곽금주, 2002; 김동연, 2002;
램을 종료한다. 김선애, 1993; 박현주, 2009; 타카하시 마사하루,
집, 나무, 사람 모두 맞게 검출된 Test 세트는 2009). 본 시스템의 상세 해석 알고리즘은 아래
각 객체의 예측 Box 정보를 가져와 Box의 중앙 표 8과 9에서 볼 수 있다.
점을 계산한다. 이때 예측 Box가 처음 설정해둔
화지의 크기를 넘어가게 검출되었다면 화지를 HTP 객체검출모델 타당도 측정
넘지 않도록 Box의 끝을 화지의 끝으로 변경하
여 예외 처리하였다. 계산된 중앙점과 Box의 예 HTP 객체검출모델이 이미지에서 객체를 찾
시는 표 10, 11, 12에서 확인할 수 있다. 여기서 고 위치와 크기를 계산하여 해석을 내보내는 연
예측이 실패한 경우는 화지에 객체 이외의 다른 구 결과가 얼마나 정확한지 확인하기 위해 해석
표시(워터마크 등)이 있기 때문에, 모델이 해당 타당도를 측정하였다. 모델을 거쳐 나온 해석
정보를 객체로 인식하는 모습을 보였다. 이후 결과를 미술치료 전문가가 그림과 함께 확인하
화지를 가로(left, center, right), 세로(up, center, 여 해석이 유효한지 True, False로 구분한다. 상
down)로 각 삼등분 한 뒤 중간점이 위치한 곳 세 내용은 아래와 같다.
을 기준으로 위치값을 저장한다. 객체의 크기는 먼저 앞서 선행논문에서 수집한 HTP 검사
Box의 넓이를 계산하여 전체 화지 넓이로 나누 그림 자료에서 집, 나무, 사람 각 100장을 1장
어 Box 크기의 비율을 구한다. 리커트 척도화로 씩, 총 3장이 한 세트가 되게 100세트를 구성하
- 1251 -
--- Page 12 ---
미술치료연구
표 8. 위치의 해석 알고리즘 표 9. 크기의 해석 알고리즘
위치 해석 크기 해석
해석 = [] # house
if house_size <= 0.33:
# house 해석.append(‘열등감, 무능력감을 가지고 있
if house_place == ‘left’: 고 소심하며, 자아강도가 낮다.’)
해석.append(‘내향적 열등감을 가지고 있 if person_size > 0.67:
다.’) 해석.append(‘가족보다는 자신을 더 중요시
elif house_place == ‘right’: 하는 경향이 있다.’)
해석.append(‘외향적 활동성을 가지고 있 elif house_size > 0.67 :
다.’) 해석.append(‘과장되고 공격적이며 보상적
방어의 감정을 가지고 과일행동을 하는 경
# tree 향이 있다.’)
if tree_place == ‘left’:
해석.append(‘자의식이 강하고 부끄러움이 # tree
많거나 내향적인 성격으로 과거로 퇴행하는 if tree_size <= 0.33:
경향이 있다.’) 해석.append(‘자신에 대해 열등감을 가지고
elif tree_place == ‘right’: 있고 무력감을 느끼고 있다.’)
해석.append(‘지적만족을 강조하며 부정적 elif 0.33 < tree_size < 0.9:
사고와 적개심을 가지는 경향이 있다.’) 해석.append(‘자기확대의 욕구를 가지며 공
상보다는 현실적인 활동에서 만족을 얻으려
# person 고 한다.’)
if person_place == ‘left’: else :
해석.append(‘소극적이며 우울감을 가지고 해석.append(‘통찰력이 부족하고 생활공간으
있다.’) 로부터의 일탈과 회의를 느낀다.’)
elif person_place == ‘right’:
해석.append(‘이기적이며 공격적이고 분노가 # person
높다.’) if person_size <= 0.33:
해석.append(‘수축된 자아를 가지고 있고 환
if house_place == ‘up’ or tree_place ==’up’ or 경을 다루는데 있어서 부적절하며 낮은 에
person_place == ‘up’: 너지 수준을 가진다.’)
해석.append(‘통찰력이 부족하고 이치에 맞 elif person_size > 0.67:
지 않는 낙천주의를 가지고 있다.’) 해석.append(‘자기를 증명하려고 노력하는
elif house_place == ‘down’ or tree_place 경향이 있다.’)
==’down’ or person_place == ‘down’:
해석.append(‘안정감을 가지지만 우울하고
위축되어 있으며 패배감이 짙다.’)
하면 False를 체크한다. 미술치료 전문가로는 미
술치료학과에 재직 중인 교수와 임상시간 1800
였다. Test 자료는 각 객체를 개별로 수집하였기 시간 이상의 미술치료학과 학부 졸업 후 석사과
때문에 연구자가 임의로 세트를 구성하였다. 구 정 이상의 임상전문가를 구성하여 미술치료 지
성한 100세트의 그림 자료를 HTP 객체검출모델 식이 풍부한 전문가 3인이 타당도를 측정하였
에 넣었을 때, 객체검출에 실패한 경우를 제외 다. 측정된 타당도는 평균 일치도 79%로 아주
하고 82세트의 해석이 반환되었다. 미술치료 전 높은 정확도를 보여주진 못했지만, 미술치료 현
문가는 이 해석자료를 그림과 함께 보고 해석이 장에서 활용될 가능성을 보여주었다.
타당한 경우에는 True를 타당하지 않다고 판단
- 1252 -
--- Page 13 ---
이은정․황세진 / 인공지능 객체검출모델 기반 집-나무-사람(HTP) 그림검사의 형식적 해석 연구
표 10. HTP 객체검출모델 ver2의 집 예측 예시 표 12. HTP 객체검출모델 ver2의 사람 예측 예시
예측 성공(TP) 예측 성공(TP)
예측 실패(FN)
예측 실패(FP)
표 11. HTP 객체검출모델 ver2의 나무 예측 예시
예측 성공(TP)
Ⅳ. 논의
본 연구는 HTP 검사 해석과정에서 객관적인
절차를 추가함으로써 신뢰도를 향상하기 위해
객체검출모델 기반 HTP 검사의 형식적 해석 연
예측 실패(FP) 구를 시도하였다. 객체인식모델을 개발하기 위
해 대학 재학생들에게 직접 HTP 검사를 시행하
며 학습 데이터를 수집하였고, F1-Score를 바탕
으로 객체인식모델의 성능을 향상시키고, 미술
치료 전문가들을 활용하여 해석의 타당도를 측
정하며 연구 결과를 도출하였다.
본 연구에 따른 논의는 다음과 같다.
첫째, HTP 검사의 집, 나무, 사람에 대한 객
체검출모델이 개발되었다. 선행 연구로 박정현
- 1253 -
--- Page 14 ---
미술치료연구
등(2019)은 딥러닝 사물 인식 알고리즘을 활용하 객체의 결과에 맞는 해석이 반환될 수 있도록
여 그림을 통한 감성 분석 분야에 활용될 수 있 모델 후처리를 통한 해석 체계를 구축하였다.
는 방안을 제시하였다. 웹 상의 아이들의 그림 셋째, HTP 검사의 형식적 해석 모델의 타당
을 모아 one-stage계열인 Mobilenet SSD v1 모 도를 측정하였다. 모델에 입력한 이미지와 반환
델로 학습시켜 사물 인식 실험을 진행하였다. 된 해석 결과를 종합하여, 미술치료 전문가 3인
재현율은 58.2%로 적은 데이터로 인해 비교적 이 최종 해석 결과를 True와 False로 구분하였
높지 않은 결과를 보여주었지만, 아이들이 그린 다. 타당도 평가에서 평균 일치도가 79%로 추후
그림 이미지 데이터로부터 집. 나무, 사람 같은 후속 연구를 통해 컴퓨터 공학을 활용한 HTP
사물을 인식하는 것이 가능하다는 것을 확인하 검사 해석 모델의 발전 가능성을 확인하였다.
였다. 본 연구는 HTP 검사의 해석을 위해선 가 더욱더 높은 정확도와 활용성을 보여주는
장 먼저 집-나무-사람 그림에 대한 구분이 필요 HTP 검사의 형식적 해석 모델을 개발하기 위해
하다고 판단하여 이를 위해 그림을 보고 어떤 다음과 같은 후속 연구를 제안하고자 한다.
객체를 그렸는지 판단하고 찾은 객체의 크기와 첫째, 본 연구를 학습데이터를 수집하기 위해
위치값을 반환하는 모델을 개발하였다. 모델의 대구․경북 내 대학교 재학생의 협조를 받았고
정확도를 측정하기 위해 학습에 사용하지 않은 학습데이터를 분석했을 때, 성별은 남성 23%,
새로운 HTP 검사 이미지를 Test 하였을 때, 최 여성 77%의 비율을, 연령은 10대 1%, 20대
종 모델의 정확도는 90%, F1-Score는 95%로 높 90%, 30대 6%, 40대 3%의 비율을 보였다. 대학
은 정확도를 보여준다. 교라는 특성상 연령에서 20대의 비율이 높게 나
둘째, 위에서 개발된 HTP 객체검출모델의 반 타나였으며, 연구에 참여한 학과의 성별 비율은
환 정보를 바탕으로, HTP 검사의 형식적 해석 여성이 높게 나타났다. 추후 연구자료를 보완할
중 크기와 위치 처리에 대한 기준 체계를 구축 때는 다양한 연령과 특성을 지닌 참여자들을 고
하였다. 조승제, 조건우, 김영욱(2021)은 HTP 검 르게 선정하는 것이 필요하다.
사에서 객체를 추출한 뒤, 추출된 객체를 통해 둘째, 해당 모델은 객체검출에 실패하였을 때
피실험자의 심리를 예측하는 모델을 제안하였 별도의 처리 없이 프로그램을 종료한다. 이는
다. 객체 인식에서 실험자의 감정을 알기 위해 모델이 객체검출에 실패하면 이미지 전처리를
사람의 얼굴만이 필요하다고 판단하였기에 사람 통해 해당 과정을 재시도하도록 추가하고, 객체
의 얼굴만을 검출하도록 훈련하였고, 감정은 기 검출 실패 사례를 분석한 이미지 전처리 알고리
쁨과 행복, 분노와 화남, 우울과 슬픔으로 3가지 즘을 개발한다면 전체 객체 검출률이 높아져 정
클래스로 분류하였다. 사람의 한 부분만 검출하 확도 또한 상승할 것으로 생각한다.
는 모델은 여러 객체의 상관관계를 계산하여 해 셋째, 해석 알고리즘은 선행연구에서 위치와
석하는 HTP 검사의 해석 모델로 활용하기에 크기에 관한 해석들만 가져와 사용하였다. 실제
어려움이 있다. 본 연구는 A4용지를 기준으로 로 사용하기 위해서는 미술치료 전문가들이 동
하여 가로(left, center, right), 세로(up, center, 의한 다양한 상황의 형식적 해석이 보완되어야
down)로 각 삼등분한 뒤 중간점이 위치한 기 한다.
준으로 위치정보를, 예측 Box의 크기 비율을 넷째, 본 연구는 해석기준을 위치와 크기로
기준으로 크기정보를 저장하였다. 선행연구에서 한정하여 후처리하였다. 후속 연구에선 영상데
HTP 검사의 형식적 해석 정보를 조사하여 각 이터를 입력 가능하게 하여 객체가 그려지는 세
- 1254 -
--- Page 15 ---